# KPI Definitions – MindsEye Google Analytics

This file defines the core metrics you’ll track for the MindsEye Google ecosystem.

All metrics are derived from:

- `nodes` (Prompt Evolution Tree)
- `runs` (execution history)

---

## 1. Node-level metrics

### 1.1 total_nodes

**Definition:**  
Number of distinct prompt nodes in the PET.

- Formula: `COUNT_DISTINCT(nodes.node_id)`
- Filter: usually `status != 'archived'` if you want only active nodes.

---

### 1.2 active_nodes

**Definition:**  
Nodes with `status = 'active'`.

- Formula: `COUNT(nodes.node_id)` with `status = 'active'`.

---

### 1.3 nodes_by_prompt_type

**Definition:**  
Distribution of nodes by prompt type.

- Dimension: `nodes.prompt_type`
- Metric: `COUNT(nodes.node_id)`

Examples: `workspace_automation`, `devlog`, `doc_review`, etc.

---

## 2. Run-level metrics

### 2.1 total_runs

**Definition:**  
Total number of executions across all nodes.

- Formula: `COUNT(runs.run_id)`

---

### 2.2 avg_runs_per_node

**Definition:**  
Average number of runs per node.

- Formula:

```text
avg_runs_per_node = total_runs / total_nodes
